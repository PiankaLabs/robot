(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var i,a=n(0),o=n(2),c=n.n(o),r=n(13),s=n.n(r),d=(n(21),n(22),n(14)),l=n(4),u=n.n(l),m=n(15),f=[],b=0,v=4096;function h(e){(function(){var e={audio:!0};return navigator.mediaDevices.getUserMedia(e)})().then(j).then(y).then(function(e){return function(t){t.onaudioprocess=function(n){var i=0,a=new Float32Array(v);if(n.inputBuffer.copyFromChannel(a,i),function(e){f.push(e),b+=e.length}(a),b>1e4){var o=function(e,t,n){var i=16e3,a=function(e){for(var t=new ArrayBuffer(2*e.length),n=new DataView(t),i=0;i<e.length;i++){var a=Math.max(-1,Math.min(1,e[i]));n.setInt16(2*i,a<0?32768*a:32767*a,!0)}return n}(function(e,t,n){if(n===t)return e;var i=t/n,a=Math.round(e.length/i),o=new Float32Array(a),c=0,r=0;for(;c<o.length;){for(var s=Math.round((c+1)*i),d=0,l=0,u=r;u<s&&u<e.length;u++)d+=e[u],l++;o[c]=d/l,c++,r=s}return o}(function(e,t){var n=new Float32Array(t),i=0;return e.forEach((function(e){n.set(e,i),i+=e.length})),n}(e,t),n,i));return new Blob([a])}(f,b,t.context.sampleRate);f=[],b=0,e(o)}}}}(e))}function j(e){return i=e,(new AudioContext).createMediaStreamSource(e)}function y(e){var t=e.context.createScriptProcessor(v,1,1);return e.connect(t),t.connect(e.context.destination),t}function g(){!function(){var e=new m.w3cwebsocket("wss://piankabot.lan:8443/microphone");e.onopen=function(){return h((function(t){return t.arrayBuffer().then((function(t){return e.send(t)}))}))}}();var e=document.getElementById("video"),t=document.getElementById("audio"),n=document.getElementById("microphoneWaveform"),i=document.getElementById("audioWaveform"),a=document.getElementById("muteButton");e.src="/video",t.src="/audio",t.play(),n.src="/microphone/waveform",n.style.visibility="visible",i.src="/audio/waveform",i.style.visibility="visible",a.style.visibility="visible";for(var o=document.getElementsByClassName("WaveformLabel"),c=0;c<o.length;c++)o.item(c).style.visibility="visible";for(var r=document.getElementsByClassName("Joystick"),s=0;s<r.length;s++)r.item(s).style.visibility="visible";return t.currentTime+=5,document.getElementById("start").hidden=!0,t.hidden=!0,!1}function p(){var e=!1;i.getTracks().forEach((function(t){"audio"===t.kind&&(t.enabled=!t.enabled),e=!t.enabled})),document.getElementById("muteButton").style.color=e?"red":"white"}function x(e){u.a.get("/robot/".concat(e.x,"/").concat(e.y))}function O(e){u.a.get("/robot/0/0")}var B=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("div",{id:"start",className:"Start",children:Object(a.jsx)("a",{onClick:g,href:"#",children:"\u25b6"})}),Object(a.jsxs)("div",{className:"App-header",children:[Object(a.jsx)("img",{id:"video",className:"Video"}),Object(a.jsx)("audio",{id:"audio",className:"Audio"})]}),Object(a.jsx)("div",{className:"Joystick",children:Object(a.jsx)(d.Joystick,{size:100,move:x,stop:O})}),Object(a.jsxs)("div",{className:"MicrophoneWaveform",children:[Object(a.jsxs)("span",{className:"WaveformLabel",children:[Object(a.jsx)("span",{className:"iconify","data-icon":"mdi:web","data-inline":"false"})," 48,000.0 Hz, 16 Bit, mono, 2 bytes/frame"]}),Object(a.jsx)("br",{}),Object(a.jsx)("img",{id:"microphoneWaveform"})]}),Object(a.jsxs)("div",{className:"AudioWaveform",children:[Object(a.jsxs)("span",{className:"WaveformLabel",children:[Object(a.jsx)("span",{className:"iconify","data-icon":"mdi-robot","data-inline":"false"})," 16,000.0 Hz, 16 Bit, stereo, 2 bytes/frame"]}),Object(a.jsx)("br",{}),Object(a.jsx)("img",{id:"audioWaveform"})]}),Object(a.jsx)("div",{id:"muteButton",className:"MuteButton",onClick:p,children:Object(a.jsx)("span",{className:"iconify","data-icon":"mdi:volume-mute","data-inline":"false"})})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),o(e),c(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(B,{})}),document.getElementById("root")),w()}},[[47,1,2]]]);
//# sourceMappingURL=main.6a9eb4d2.chunk.js.map